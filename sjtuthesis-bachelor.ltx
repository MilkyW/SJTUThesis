%%
%% This is file `sjtuthesis-bachelor.ltx',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% sjtuthesis.dtx  (with options: `bachelor')
%% 
%% Copyright (C) 2009-2017 by weijianwen <weijianwen@gmail.com>
%%           (C) 2018-2019 by SJTUG
%% 
%% This file may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3c
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%     https://www.latex-project.org/lppl.txt
%% and version 1.3c or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%% 
\ProvidesFile{sjtuthesis-bachelor.ltx}
  [2018/01/11 1.0.0rc Shanghai Jiao Tong University Thesis Template]
\def\sjtu@degree@chi{学士}
\def\sjtu@degree@eng{Bachelor}
\def\sjtu@author@chi{学生姓名}
\def\sjtu@studentid@chi{学生学号}
\def\sjtu@supervisor@chi{指导教师}
\def\sjtu@coursename@chi{课程名称}
\def\sjtu@major@chi{专业}
\def\sjtu@department@chi{学院(系)}
\ifsjtu@course
  \def\sjtu@subtitle@chi{课程论文}
  \def\sjtu@subtitle@eng{}
\else
  \def\sjtu@subtitle@chi{\sjtu@degree@chi 学位论文}
  \def\sjtu@subtitle@eng{Thesis of \sjtu@degree@eng}
\fi
\geometry{%
  paper      = a4paper,
  vmargin    = 72bp,
  hmargin    = 90bp}
\ifsjtu@english
  \def\sjtu@titlemark{\sjtu@englishtitle}
  \newcommand\sjtu@fancyhead{%
    \parbox[b]{0.75\textwidth}{%
      \raggedleft\nouppercase{\footnotesize\kaishu\sjtu@titlemark}}}
  \newcommand\sjtu@fancyfoot[2]{%
    \small --~~Page~~{\bfseries{#1}}~~of~~{\bfseries{#2}}~~--}
\else
  \def\sjtu@titlemark{\sjtu@title}
  \newcommand\sjtu@fancyhead{%
    \parbox[b]{0.75\textwidth}{%
      \raggedleft\nouppercase{\small\kaishu\sjtu@titlemark}}}
  \newcommand\sjtu@fancyfoot[2]{%
    \small 第~{\bfseries{#1}}~页\,共~{\bfseries{#2}}~页}
\fi
\fancypagestyle{sjtu@front}{%
  \fancyhf{}
  \fancyhead[L]{\includegraphics{figure/sjtubanner}}
  \fancyhead[R]{\sjtu@fancyhead}
  \fancyfoot[C]{\sjtu@fancyfoot{\thepage}{\lastpageref{pagesLTS.Roman}}}
}
\fancypagestyle{sjtu@plain}{%
  \fancyhf{}
  \fancyhead[L]{\includegraphics{figure/sjtubanner}}
  \fancyhead[R]{\sjtu@fancyhead}
  \fancyfoot[C]{\sjtu@fancyfoot{\thepage}{\lastpageref{pagesLTS.arabic}}}
}
\fancypagestyle{sjtu@biglast}{%
  \fancyhf{}
  \fancyhead[L]{\includegraphics{figure/sjtubanner}}
  \fancyhead[R]{\sjtu@fancyhead}
  \fancyfoot[C]{\sjtu@fancyfoot{\theCurrentPageLocal}%
                               {\lastpageref{pagesLTS.roman.local}}}
}
\renewcommand\frontmatter{%
  \cleardoublepage
  \@mainmatterfalse
  \pagenumbering{Roman}%
  \pagestyle{sjtu@front}%
}
\renewcommand\mainmatter{%
  \cleardoublepage
  \@mainmattertrue
  \pagenumbering{arabic}%
  \pagestyle{sjtu@plain}%
}
\renewcommand{\cftchapfont}{\normalfont}
\NewDocumentEnvironment{abstract}{}%
{\cleardoublepage
  \pdfbookmark[0]{\sjtu@abstract}{abstract}
  \chapter*{%
    \sjtu@title \vskip 16bp
    {\zihao{4}\sjtu@abstract@chi}
  }
  \markboth{\sjtu@abstract@chi}{}
}{%
  \vspace{3ex}\noindent
  {\zihao{-4}\heiti\sjtu@keywords@chi}{\zihao{5}\sjtu@keywords}
}
\NewDocumentEnvironment{englishabstract}{}{%
  \cleardoublepage
  \chapter*{%
    \MakeUppercase\sjtu@englishtitle \vskip 16bp
    {\zihao{4}\MakeUppercase\sjtu@abstract@eng}
  }
  \markboth{\sjtu@abstract@eng}{}
}{%
  \vspace{3ex}\noindent
  {\zihao{-4}\bfseries\sjtu@keywords@eng}{\zihao{5}\sjtu@englishkeywords}
}
\newcommand\sjtu@bigabstract[1]{\long\gdef\sjtu@bigabstract@body{#1}}
\NewDocumentEnvironment{bigabstract}{}
{\Collect@Body\sjtu@bigabstract}
{
  \ifsjtu@course\relax\else%
    \ifsjtu@english\relax\else%
      \AtEndDocument{%
        \cleardoublepage
        \pagenumbering{roman}
        \pagestyle{sjtu@biglast}
        \chapter*{\MakeUppercase\sjtu@englishtitle}
        \sjtu@bigabstract@body
      }
    \fi
  \fi
}
\RenewDocumentCommand\maketitle{}{%
  \sjtu@makechinesetitle%
}
\newcommand\sjtu@makechinesetitle{
  \cleardoublepage
  \thispagestyle{empty}
  \begin{center}
    \kaishu
    \vspace*{56bp}
    \includegraphics{sjtulogo}
    \vskip 32bp
    {\fontsize{32}{32}\sjtu@subtitle@chi}
    \vskip 16bp
    {\zihao{-2}\MakeUppercase\sjtu@subtitle@eng}
    \vskip 16bp
    \includegraphics{sjtubadge}
    \vskip \stretch{2}
    {\zihao{2}
      \begin{tabular}{r@{：}l}
        论文题目 &
        \begin{minipage}[t]{300pt}
          \zihao{-2}
          \begin{center}
            \sjtu@uline\sjtu@title
          \end{center}
        \end{minipage}
      \end{tabular}}
    \vskip \stretch{1}
    {\zihao{3}
      \def\arraystretch{1.1}
      \begin{tabular}
        {>{\begin{CJKfilltwosides}{4\ccwd}}r<{\end{CJKfilltwosides}}@{：}c}
        \sjtu@author@chi       & \sjtu@author      \\ \cline{2-2}
        \sjtu@studentid@chi    & \makebox[180pt]{\sjtu@studentid}  \\ \cline{2-2}
        \ifsjtu@course
          \sjtu@coursename@chi & \sjtu@coursename  \\ \cline{2-2}
        \else
          \sjtu@major@chi      & \sjtu@major       \\ \cline{2-2}
        \fi
        \sjtu@supervisor@chi   & \sjtu@supervisor  \\ \cline{2-2}
        \sjtu@department@chi   & \sjtu@department  \\ \cline{2-2}
      \end{tabular}}
    \vskip 32bp
  \end{center}
  \cleardoublepage
}
\endinput
%%
%% End of file `sjtuthesis-bachelor.ltx'.
