%%
%% This is file `sjtuthesis-bachelor.ltx',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% sjtuthesis.dtx  (with options: `bachelor')
%% 
%% Copyright (C) 2009-2017 by weijianwen <weijianwen@gmail.com>
%%           (C) 2018-2019 by SJTUG
%% 
%% This file may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3c
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%     https://www.latex-project.org/lppl.txt
%% and version 1.3c or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%% 
\ProvidesFile{sjtuthesis-bachelor.ltx}
  [2018/01/11 1.0.0rc Shanghai Jiao Tong University Thesis Template]
\ifsjtu@course
  \sjtu@def@label{degreeChi}{}
  \sjtu@def@label{degreeEng}{}
\else
  \sjtu@def@label{degreeChi}{学士}
  \sjtu@def@label{degreeEng}{Bachelor}
\fi
\sjtu@def@label{authorChi}{学生姓名}
\sjtu@def@label{studentidChi}{学生学号}
\sjtu@def@label{supervisorChi}{指导教师}
\sjtu@def@label{coursenameChi}{课程名称}
\sjtu@def@label{majorChi}{专业}
\sjtu@def@label{departmentChi}{学院(系)}
\ifsjtu@course
  \sjtu@def@label{thesiscat}{课程论文}
  \def\sjtu@label@thesistype{\sjtu@label@thesiscat}
  \sjtu@def@label{subjectChi}{\sjtu@label@thesiscat}
  \sjtu@def@label{subjectEng}{Course Paper}
\else
  \sjtu@def@label{thesiscat}{学位论文}
  \def\sjtu@label@thesistype{毕业设计（论文）}
  \sjtu@def@label{subjectChi}{\sjtu@label@degreeChi\sjtu@label@thesiscat}
  \sjtu@def@label{subjectEng}{Thesis of \sjtu@label@degreeEng}
\fi
\geometry{%
  paper      = a4paper,
  vmargin    = 72bp,
  hmargin    = 90bp}
\ifsjtu@english
  \def\sjtu@titlemark{\sjtu@value@englishtitle}
  \newcommand\sjtu@fancyhead{%
    \parbox[b]{0.75\textwidth}{%
      \raggedleft\nouppercase{\footnotesize\kaishu\sjtu@titlemark}}}
  \newcommand\sjtu@fancyfoot[2]{%
    \small --~~Page~~{\bfseries{#1}}~~of~~{\bfseries{#2}}~~--}
\else
  \def\sjtu@titlemark{\sjtu@value@title}
  \newcommand\sjtu@fancyhead{%
    \parbox[b]{0.75\textwidth}{%
      \raggedleft\nouppercase{\small\kaishu\sjtu@titlemark}}}
  \newcommand\sjtu@fancyfoot[2]{%
    \small 第~{\bfseries{#1}}~页\,共~{\bfseries{#2}}~页}
\fi
\fancypagestyle{sjtu@front}{%
  \fancyhf{}
  \fancyhead[L]{\includegraphics{figure/sjtubanner.pdf}}
  \fancyhead[R]{\sjtu@fancyhead}
  \fancyfoot[C]{\sjtu@fancyfoot{\thepage}{\lastpageref{pagesLTS.Roman}}}
}
\fancypagestyle{sjtu@plain}{%
  \fancyhf{}
  \fancyhead[L]{\includegraphics{figure/sjtubanner.pdf}}
  \fancyhead[R]{\sjtu@fancyhead}
  \fancyfoot[C]{\sjtu@fancyfoot{\thepage}{\lastpageref{pagesLTS.arabic}}}
}
\fancypagestyle{sjtu@biglast}{%
  \fancyhf{}
  \fancyhead[L]{\includegraphics{figure/sjtubanner.pdf}}
  \fancyhead[R]{\sjtu@fancyhead}
  \fancyfoot[C]{\sjtu@fancyfoot{\theCurrentPageLocal}%
                               {\lastpageref{pagesLTS.roman.local}}}
}
\AtBeginDocument{%
  \pagenumbering{Alph}
  \pagestyle{empty}}
\renewcommand\frontmatter{%
  \cleardoublepage
  \@mainmatterfalse
  \pagenumbering{Roman}
  \pagestyle{sjtu@front}}
\renewcommand\mainmatter{%
  \cleardoublepage
  \@mainmattertrue
  \pagenumbering{arabic}
  \pagestyle{sjtu@plain}}
\renewcommand{\cftchapfont}{\normalfont}
\NewDocumentEnvironment{abstract}{}%
{\cleardoublepage
  \pdfbookmark[0]{\sjtu@label@abstract}{abstract}
  \chapter*{%
    \sjtu@value@title \vskip 16bp
    {\zihao{4}\sjtu@label@abstractChi}
  }
  \markboth{\sjtu@label@abstractChi}{}
}{%
  \vspace{3ex}\noindent
  {\zihao{-4}\heiti\sjtu@label@keywordsChi}{\zihao{5}\sjtu@value@keywords}
}
\NewDocumentEnvironment{englishabstract}{}{%
  \cleardoublepage
  \chapter*{%
    \MakeUppercase\sjtu@value@englishtitle \vskip 16bp
    {\zihao{4}\MakeUppercase\sjtu@label@abstractEng}}
  \markboth{\sjtu@label@abstractEng}{}
}{%
  \vspace{3ex}\noindent
  {\zihao{-4}\bfseries\sjtu@label@keywordsEng}
  {\zihao{5}\sjtu@value@englishkeywords}}
\newcommand\sjtu@bigabstract[1]{\long\gdef\sjtu@bigabstract@body{#1}}
\NewDocumentEnvironment{bigabstract}{}
{\Collect@Body\sjtu@bigabstract}
{\ifsjtu@course\relax\else%
  \ifsjtu@english\relax\else%
    \AtEndDocument{%
      \cleardoublepage
      \pagenumbering{roman}
      \pagestyle{sjtu@biglast}
      \chapter*{\MakeUppercase\sjtu@value@englishtitle}
      \sjtu@bigabstract@body
    }
  \fi
\fi}
\RenewDocumentCommand\maketitle{}{%
  \sjtu@makechinesetitle%
}
\newcommand\sjtu@makechinesetitle{
  \cleardoublepage
  \thispagestyle{empty}
  \begin{center}
    \kaishu
    \vspace*{56bp}
    \includegraphics{figure/sjtulogo.pdf}
    \vskip 32bp
    {\fontsize{32}{32}\sjtu@label@subjectChi}
    \vskip 16bp
    {\zihao{-2}\MakeUppercase\sjtu@label@subjectEng}
    \vskip 16bp
    \includegraphics{figure/sjtubadge.pdf}
    \vskip \stretch{2}
    {\zihao{2}
      \begin{tabular}{r@{：}l}
        论文题目 &
        \begin{minipage}[t]{300pt}
          \zihao{-2}
          \begin{center}
            \sjtu@uline\sjtu@value@title
          \end{center}
        \end{minipage}
      \end{tabular}}
    \vskip \stretch{1}
    {\zihao{3}
      \def\arraystretch{1.1}
      \begin{tabular}
        {>{\begin{CJKfilltwosides}{4\ccwd}}r<{\end{CJKfilltwosides}}@{：}c}
        \sjtu@label@authorChi        & \sjtu@value@author      \\ \cline{2-2}
        \sjtu@label@studentidChi     & \makebox[180pt]{\sjtu@value@studentid} \\
          \cline{2-2}
        \ifsjtu@course
          \sjtu@label@coursenameChi  & \sjtu@value@coursename  \\ \cline{2-2}
        \else
          \sjtu@label@majorChi       & \sjtu@value@major       \\ \cline{2-2}
        \fi
        \sjtu@label@supervisorChi    & \sjtu@value@supervisor  \\ \cline{2-2}
        \sjtu@label@departmentChi    & \sjtu@value@department  \\ \cline{2-2}
      \end{tabular}}
    \vskip 32bp
  \end{center}
  \cleardoublepage
}
\endinput
%%
%% End of file `sjtuthesis-bachelor.ltx'.
